(("undefined"!==typeof self?self:this)["webpackJsonpImportDatas"]=("undefined"!==typeof self?self:this)["webpackJsonpImportDatas"]||[]).push([[4],{"20f1":function(e,t,n){},a4d5:function(e,t,n){"use strict";n("20f1")},ac30:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex align-items-center pl-5 p-3 mb-2 border"},[n("b-button",{staticClass:"mx-4",attrs:{variant:"danger"},on:{click:e.getVocabulary}},[e._v(" Suppresion des termes ")]),n("b-form-group",{staticClass:"align-items-center"},[n("b-form-checkbox",{attrs:{name:"checkbox-1",value:!0,"unchecked-value":!1},model:{value:e.recursive,callback:function(t){e.recursive=t},expression:"recursive"}},[e._v(" Recursive ... ")])],1),n("b-form-group",{staticClass:"align-items-center",attrs:{label:"Nombre de termes à supprimer"}},[n("b-form-input",{attrs:{type:"number"},model:{value:e.NumberTermDelete,callback:function(t){e.NumberTermDelete=t},expression:"NumberTermDelete"}})],1),e.recursive?n("div",{staticClass:"mx-5"},[n("b-icon",{attrs:{icon:"three-dots",animation:"cylon","font-scale":"2"}})],1):e._e()],1),e._l(e.delteTermes,(function(t,r){return n("div",{key:r},[e._v(" "+e._s(t.time/1e3)+" s "),n("hr"),e._l(t.terms,(function(t,r){return n("span",{key:r},[e._v(" "+e._s(t.text)+" | ")])}))],2)}))],2)},o=[],i=(n("159b"),n("a434"),n("ba97"),n("019c"),n("5530")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:e.onSubmit}},[n("span",[e._v(e._s(e.texte))]),e.running?n("b-icon",{staticClass:"ml-2",attrs:{icon:"arrow-clockwise",animation:"spin-pulse"}}):e._e()],1)],1)},s=[],c={name:"ButtonSave",props:{running:{type:Boolean,required:!0},texte:{type:String,default:"Enregistrer"}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{onSubmit:function(){this.$emit("ev-click")}}},u=c,l=n("2877"),d=Object(l["a"])(u,a,s,!1,null,"29246a2e",null),f=(d.exports,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:e.DeleteFile}},[n("span",[e._v(" "+e._s(e.texte)+" ")]),e.running?n("b-icon",{staticClass:"ml-2",attrs:{icon:"arrow-clockwise",animation:"spin-pulse"}}):e._e()],1)],1)}),m=[],h={name:"ButtonDelete",props:{running:{type:Boolean,required:!0},texte:{type:String,default:"Supprimer"}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{DeleteFile:function(){this.$emit("ev-click")}}},p=h,g=Object(l["a"])(p,f,m,!1,null,"0b82f270",null),v=(g.exports,n("1c24"),n("869e"),n("82e4"),n("c26d"),n("a9ce"),n("9a6c"),n("7973"),n("47d8"),n("6b54")),b=n.n(v),w=b.a.create({timeout:3e5}),k={axiosInstance:w,TestDomain:null,isLocalDev:!(!window.location.host.includes("localhost")&&!window.location.host.includes(".kksa")),BaseUrl:function(){return this.isLocalDev&&this.TestDomain?this.TestDomain.trim("/"):window.location.protocol+"//"+window.location.host},post:function(e,t,n){var r=this;return new Promise((function(o,i){var a=e.includes("://")?e:r.BaseUrl()+e;w.post(a,t,n).then((function(e){o({status:!0,data:e.data,reponse:e})})).catch((function(e){i({status:!1,error:e.response,code:e.code,stack:e.stack})}))}))},get:function(e,t){var n=this;return new Promise((function(r,o){var i=e.includes("://")?e:n.BaseUrl()+e;w.get(i,t).then((function(e){r({status:!0,data:e.data,reponse:e})})).catch((function(e){o({status:!1,error:e.response,code:e.code,stack:e.stack})}))}))},postFile:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(o,i){n.getBase64(t).then((function(a){var s=new Headers;console.log("headers : ",s);var c=t.name.split("."),u={method:"POST",headers:s,body:JSON.stringify({upload:a.base64,filename:c[0],ext:c[1],id:r}),cache:"default"},l=e.includes("://")?e:n.BaseUrl()+e;fetch(l,u).then((function(e){e.json().then((function(e){o(e)})).catch((function(e){i(e)}))}))}))}))},getBase64:function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){var e=r.result.split(",");t({src:r.result,base64:e[1]})},r.onerror=function(e){return n(e)}}))}},T=k,y=n("a3c2"),x=n("0ae9"),_=n("1be5");y["default"].use(x["a"]),y["default"].use(_["a"]);var j=new y["default"],O=(Object(i["a"])(Object(i["a"])({},T),{},{$bvToast:j.$bvToast,$bvModal:j.$bvModal,modalMessage:function(e,t){var n=this,r={size:"md",buttonSize:"sm",hideFooter:!0,centered:!0};for(var o in t)r[o]=t[o];return new Promise((function(t,o){n.$bvModal.msgBoxConfirm(e,r).then((function(e){e?t(e):o(e)})).catch((function(e){o(e)}))}))},modalConfirmDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Confirmer la suppression, NB : cette action est irreverssible.",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"Attention",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Annuler",footerClass:"p-2"};return this.modalMessage(e,t)},modalSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={title:"Succes",headerBgVariant:"success",bodyClass:["p-3"],hideFooter:!0,headerTextVariant:"light"};for(var r in t)n[r]=t[r];return this.modalMessage(e,n)},notification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.$bvToast.toast(" ",{title:e,variant:t,solid:!0,toaster:"b-toaster-top-right"})},bPost:function(e,t,n){var r=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(i,a){r.post(e,t,n).then((function(e){o&&r.notification("success"),i(e)})).catch((function(e){r.notification(r.GetErrorTitle(e),"warning"),a(e)}))}))},bGet:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(o,i){n.get(e,t).then((function(e){r&&n.notification("success"),o(e)})).catch((function(e){n.notification(n.GetErrorTitle(e),"warning"),i(e)}))}))},GetErrorTitle:function(e){var t;if(e.code)switch(e.code){case"ECONNABORTED":var n=this.axiosInstance.defaults.timeout/1e3+"s";t="Impossible de joindre l'hote distant, temps impartie epuisé. ("+n+")";break;default:t="Une erreur s'est produite"}else e.error&&e.error.statusText&&(t=decodeURI(e.error.statusText));return t}}),Object(i["a"])(Object(i["a"])({},T),{},{getRandomIntInclusive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}})),C=O,D={url_session:"/session/token",token:null,getToken:function(){var e=this;return new Promise((function(t){e.token&&t(e.token),console.log(" Config :: ",C.BaseUrl(),"\n this.url_session :: ",e.url_session),C.get(C.BaseUrl()+e.url_session).then((function(n){e.token=n.data,t(n.data)}))}))}},B=n("1da1"),P=(n("2207"),Object(i["a"])(Object(i["a"])({},C),{},{dPost:function(e,t){var n=arguments,r=this;return Object(B["a"])(regeneratorRuntime.mark((function o(){var i,a,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:null,o.next=3,D.getToken();case 3:return a=o.sent,s={"X-CSRF-Token":a,"Content-Type":"application/json"},i&&(s=r.mergeHeaders(i,s)),o.abrupt("return",r.post(e,t,{headers:s}));case 7:case"end":return o.stop()}}),o)})))()},dGet:function(e){var t=arguments,n=this;return Object(B["a"])(regeneratorRuntime.mark((function r(){var o,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:null,r.next=3,D.getToken();case 3:return i=r.sent,a={"X-CSRF-Token":i,"Content-Type":"application/json"},o&&(a=n.mergeHeaders(o,a)),r.abrupt("return",n.get(e,{headers:a}));case 7:case"end":return r.stop()}}),r)})))()},mergeHeaders:function(e,t){if(e)for(var n in e)t[n]=e[n];return t}})),U=P,I=n("d4ec"),E=n("bee2"),S=(n("8b32"),{baseURl:"/jsonapi",headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"}}),R=(n("d701"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(I["a"])(this,e),this.query=t}return Object(E["a"])(e,[{key:"addFilter",value:function(e,t,n){var r="fil-"+C.getRandomIntInclusive();return this.addParam(r,"path",e),this.addParam(r,"operator",t),this.addParam(r,"value",n),this.query}},{key:"addParam",value:function(e,t,n){this.query&&""!==this.query&&(this.query+="&"),this.query+="filter[".concat(e,"][condition][").concat(t,"]=").concat(n)}}]),e}()),F=R,q=function(){function e(t){Object(I["a"])(this,e),this.vid=t,this.url=S.baseURl+"/taxonomy_term/"+this.vid,this.terms=[]}return Object(E["a"])(e,[{key:"get",value:function(){var e=this;return new Promise((function(t){U.get(e.url,S.headers).then((function(n){e.terms=n.data,t(n.data)}))}))}},{key:"getSearch",value:function(e){var t=this,n=new F;return n.addFilter("name","CONTAINS",e),new Promise((function(e){U.get(t.url+"?"+n.query,S.headers).then((function(n){t.terms=n.data,e(n.data)}))}))}},{key:"getOptions",value:function(){var e=[];for(var t in this.terms.data){var n=this.terms.data[t];e.push({text:n.attributes.name,value:n.attributes.drupal_internal__tid})}return e}}]),e}(),$=q,N=(Object(i["a"])(Object(i["a"])({},U),{},{getCurrentUser:function(){var e=this;return new Promise((function(t){e.get("/appformmanager/current-user").then((function(e){t(e.data)}))}))},getUser:function(e){var t=this;return new Promise((function(n){t.get("/user/"+e+"?_format=json").then((function(e){n(e.data)}))}))}}),n("bdca"),n("9d0b"),n("a2f4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttton-google-aouth",attrs:{id:e.idHtmlrender}})}),A=[],M={userAccess:{},client_id:"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com"};function G(e){return new Promise((function(t){var n=document.createElement("script");n.setAttribute("src",e),n.onload=function(){console.log(" Chargement du script ok : ",e),t(!0)},document.head.appendChild(n)}))}var H={name:"logingoogle",props:{idHtml:{type:String,required:!0},returnUidInfo:{type:Boolean,default:!1}},mounted:function(){var e=this;window.google?this.getUserInfoFromFrame():G("https://accounts.google.com/gsi/client").then((function(){e.getUserInfoFromFrame()}))},computed:{idHtmlrender:function(){return"google-login-tab"+this.idHtml}},methods:{getUserInfoFromFrame:function(){var e=this;function t(t){console.log("Encoded JWT ID token: ",t),M.userAccess=Object(i["a"])(Object(i["a"])({},t),{},{client_id:t.clientId}),e.TryToLoginWithGoogle(),window.rxGoogle=M}console.log(" window.onload ! ",window.onload);var n=function(){window.google.accounts.id.initialize({client_id:M.client_id,callback:t}),window.google.accounts.id.renderButton(document.getElementById(e.idHtmlrender),{theme:"outline",size:"large"}),window.google.accounts.id.prompt()};n()},TryToLoginWithGoogle:function(){var e=this;return new Promise((function(t,n){U.post("/login-rx-vuejs/google-check",M.userAccess).then((function(n){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-success",e.alertText="Connexion réussie",e.$emit("ev_logingoogle",n.data),e.returnUidInfo||(n.reponse&&n.reponse.config.url!==n.reponse.request.responseURL?window.location.assign(n.reponse.request.responseURL):n.data&&n.data.createuser?e.stepe="final-gl-register":window.location.assign(window.location.origin)),t(n)})).catch((function(t){e.isBusy=!1,e.alertDisplay=!0,e.alertType="alert-danger",e.alertText="Google : Erreur de connexion",t.error&&t.error.statusText&&""!=t.error.statusText&&(e.alertText=t.error.statusText),console.log(" Error ajax ",t.error),console.log(" Error ajax ",t.code),console.log(" Error ajax ",t.stack),n(t)}))}))}}},L=H,z=(n("a4d5"),Object(l["a"])(L,N,A,!1,null,null,null));z.exports;U.TestDomain="http://v2lesroisdelareno.kksa";var V={name:"DeleteTerms",data:function(){return{delteTermes:[],recursive:!1,NumberTermDelete:1}},mounted:function(){},methods:{getVocabulary:function(){var e=this,t=new Date,n="departement_de_france",r=new $(n),o=function o(){r.get().then((function(){var i=r.getOptions(),a=[];i.forEach((function(t){a.length<e.NumberTermDelete&&a.push(t.value)})),U.post("/import-entity-progress/deleteterms",{vid:n,tids:a}).then((function(){var n=new Date-t;i.splice(a.length,i.length-a.length),e.delteTermes.push({terms:i,time:n}),e.recursive&&o()}))}))};o()}}},J=V,W=Object(l["a"])(J,r,o,!1,null,null,null);t["default"]=W.exports}}]);
//# sourceMappingURL=ImportDatas.umd.min.4.js.map